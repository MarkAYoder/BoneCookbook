<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.12">
<title>Capes</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:50%;border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
</div>
<div id="content">
<div class="sect1">
<h2 id="capes">Capes</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_introduction">Introduction</h3>
<div class="paragraph">
<p>Previous chapters of this book show a variety of ways to interface BeagleBone Black to the physical world by using a breadboard and wiring to the P8 and P9 headers. This is a great approach because it&#8217;s easy to modify your circuit to debug it or try new things. At some point, though, you might want a more permanent solution, either because you need to move the Bone and you don&#8217;t want wires coming loose, or because you want to share your hardware with the masses.</p>
</div>
<div class="paragraph">
<p>You can easily expand the functionality of the Bone by adding a  <a href="http://bit.ly/1wucweC"><em>cape</em></a>. A cape is simply a board&#8212;&#8203;often a printed circuit board (PCB)&#x2014;that connects to the P8 and P9 headers and follows a few standard pin usages. You can stack up to four capes onto the Bone. Capes can range in size from Bone-sized (<a href="#capes_miniDisplay">Using a 128 x 128-Pixel LCD Cape</a>) to much larger than the Bone (<a href="#capes_7inLCD">Using a Seven-Inch LCD Cape</a>).</p>
</div>
<div class="paragraph">
<p>This chapter shows how to attach a couple of capes, move your design to a protoboard, then to a PCB, and finally on to mass production.</p>
</div>
</div>
<div class="sect2">
<h3 id="capes_7inLCD">Using a Seven-Inch LCD Cape</h3>
<div class="sect3">
<h4 id="_problem">Problem</h4>
<div class="paragraph">
<p>You want to display the Bone&#8217;s desktop on a portable LCD.</p>
</div>
</div>
<div class="sect3">
<h4 id="_solution">Solution</h4>
<div class="paragraph">
<p>A number of <a href="http://bit.ly/1AjlXJ9">LCD capes</a> are built for the Bone, ranging in size from three to seven inches. This recipe attaches a seven-inch <a href="http://bit.ly/1NK8Hra">BeagleBone LCD7</a> from <a href="http://circuitco.com/">CircuitCo</a> (shown in <a href="#capes_7inLCD_fig">Seven-inch LCD from CircuitCo <sup class="footnote">[1]</sup></a>) to the Bone.</p>
</div>
<div id="capes_7inLCD_fig" class="imageblock">
<div class="content">
<img src="figures/LCD.png" alt="7 inch LCD">
</div>
<div class="title">Figure 1. Seven-inch LCD from CircuitCo <sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup></div>
</div>
<div class="paragraph">
<p>To make this recipe, you will need:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Seven-inch LCD cape (see <a href="#app_misc">[app_misc]</a>)</p>
</li>
<li>
<p>A 5 V power supply (see <a href="#app_misc">[app_misc]</a>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Just attach the Bone to the back of the LCD, making sure pin 1 of P9 lines up with pin 1 of P9 on the LCD. Apply a 5 V power supply, and the desktop will appear on your LCD, as shown in <a href="#capes_LCD7Desktop">Seven-inch LCD desktop</a>.</p>
</div>
<div id="capes_LCD7Desktop" class="imageblock">
<div class="content">
<img src="figures/LCD7Desktop.png" alt="7 inch LCD desktop">
</div>
<div class="title">Figure 2. Seven-inch LCD desktop</div>
</div>
<div class="paragraph">
<p>Attach a USB keyboard and mouse, and you have a portable Bone. <a href="https://www.adafruit.com/products/922">Wireless keyboard and mouse combinations</a> make a nice solution to avoid the need to add a USB hub.</p>
</div>
</div>
<div class="sect3">
<h4 id="_discussion">Discussion</h4>

</div>
</div>
<div class="sect2">
<h3 id="capes_miniDisplay">Using a 128 x 128-Pixel LCD Cape</h3>
<div class="sect3">
<h4 id="_problem_2">Problem</h4>
<div class="paragraph">
<p>You want to use a small LCD to display things other than the desktop.</p>
</div>
</div>
<div class="sect3">
<h4 id="_solution_2">Solution</h4>
<div class="paragraph">
<p>The <a href="http://bit.ly/1xd0r8p">MiniDisplay</a> is a 128 x 128 full-color LCD cape that just fits on the Bone, as shown in <a href="#capes_miniDisplay_fig">MiniDisplay 128 x 128-pixel LCD from CircuitCo</a>.</p>
</div>
<div id="capes_miniDisplay_fig" class="imageblock">
<div class="content">
<img src="figures/MiniDisplay-A1.jpg" alt="miniDisplay LCD">
</div>
<div class="title">Figure 3. MiniDisplay 128 x 128-pixel LCD from CircuitCo</div>
</div>
<div class="paragraph">
<p>To make this recipe, you will need:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>MiniDisplay LCD cape (see <a href="#app_misc">[app_misc]</a>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Attach to the Bone and apply power. Then run the following commands:</p>
</div>
<pre data-type="programlisting">
# From http://elinux.org/CircuitCo:MiniDisplay_Cape
# Datasheet:
# https://www.crystalfontz.com/products/document/3277/ST7735_V2.1_20100505.pdf
bone$ <strong>wget http://elinux.org/images/e/e4/Minidisplay-example.tar.gz</strong>
bone$ <strong>tar zmxvf Minidisplay-example.tar.gz</strong>
bone$ <strong>cd minidisplay-example</strong>
bone$ <strong>make</strong>
bone$ <strong>./minidisplay-test</strong>
Unable to initialize SPI: No such file or directory
Aborted
</pre>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>You might get a compiler warning, but the code should run fine.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The MiniDisplay uses the Serial Peripheral Interface (SPI) interface, and it&#8217;s not initialized. The <a href="http://bit.ly/1xd0r8p">manufacturer&#8217;s website</a> suggests enabling SPI0 by using the following commands:</p>
</div>
<pre data-type="programlisting">
bone$ <strong>export SLOTS=/sys/devices/bone_capemgr.*/slots</strong>
bone$ <strong>echo BB-SPIDEV0 &gt; $SLOTS</strong>
</pre>
<div class="paragraph">
<p>Hmmm, something isn&#8217;t working here. Here&#8217;s how to see what happened:</p>
</div>
<pre data-type="programlisting">
bone$ <strong>dmesg | tail</strong>
[  625.334497] bone_capemgr.9: part_number 'BB-SPIDEV0', version 'N/A'
[  625.334673] bone_capemgr.9: slot #11: generic override
[  625.334720] bone_capemgr.9: bone: Using override eeprom data at slot 11
[  625.334769] bone_capemgr.9: slot #11: 'Override Board Name,00A0,Override \
               Manuf,BB-SPIDEV0'
[  625.335026] bone_capemgr.9: slot #11: \Requesting part number/version based \
               'BB-SPIDEV0-00A0.dtbo
[  625.335076] bone_capemgr.9: slot #11: Requesting firmware \
               'BB-SPIDEV0-00A0.dtbo' \
               for board-name 'Override Board Name', version '00A0'
[  625.335144] bone_capemgr.9: slot #11: dtbo 'BB-SPIDEV0-00A0.dtbo' loaded; \
               converting to live tree
[  625.341842] bone_capemgr.9: slot #11: BB-SPIDEV0 conflict P9.21 \
               (#10:bspwm_P9_21_b) <a class="co" id="capemgr_conflict_co" href="#capemgr_conflict" ><img src="callouts/1.png" alt="1"/></a>
[  625.351296] bone_capemgr.9: slot #11: Failed verification
</pre>


<dl class="calloutlist">
 <dt><a class="co" id="capemgr_conflict" href="#capemgr_conflict_co"><img src="callouts/1.png" alt="1"/></a></dt>
  <dd>Shows there is a conflict for pin <code>P9_21</code>: it's already configured for pulse width modulation (PWM).</dd>

</dl>
<div class="paragraph">
<p>Here&#8217;s how to see what&#8217;s already configured:</p>
</div>
<pre data-type="programlisting">
bone$ <strong>cat $SLOTS</strong>
 0: 54:PF---
 1: 55:PF---
 2: 56:PF---
 3: 57:PF---
 4: ff:P-O-L Bone-LT-eMMC-2G,00A0,Texas Instrument,BB-BONE-EMMC-2G
 5: ff:P-O-L Bone-Black-HDMI,00A0,Texas Instrument,BB-BONELT-HDMI
 7: ff:P-O-L Override Board Name,00A0,Override Manuf,bspm_P9_42_27
 8: ff:P-O-L Override Board Name,00A0,Override Manuf,bspm_P9_41_27
 9: ff:P-O-L Override Board Name,00A0,Override Manuf,am33xx_pwm
10: ff:P-O-L Override Board Name,00A0,Override Manuf,bspwm_P9_21_b <a class="co" id="capemgr_load_co" href="#capemgr_load"><img src="callouts/1.png" alt="1"/></a>
</pre>


<dl class="calloutlist">
 <dt><a id="capemgr_load" href="#capemgr_load_co"><img src="callouts/1.png" alt="1"/></a></dt>
  <dd>You can see the eMMC, HDMI, and three PWMs are already using some of the pins. Slot 10 shows <code>P9_21</code> is in use by a PWM.</dd>
</dl>
<div class="paragraph pagebreak-before">
<p>You can unconfigure it by using the following commands:</p>
</div>
<pre data-type="programlisting">
bone$ <strong>echo -10 &gt; $SLOTS</strong>
bone$ <strong>cat $SLOTS</strong>
 0: 54:PF---
 1: 55:PF---
 2: 56:PF---
 3: 57:PF---
 4: ff:P-O-L Bone-LT-eMMC-2G,00A0,Texas Instrument,BB-BONE-EMMC-2G
 5: ff:P-O-L Bone-Black-HDMI,00A0,Texas Instrument,BB-BONELT-HDMI
 7: ff:P-O-L Override Board Name,00A0,Override Manuf,bspm_P9_42_27
 8: ff:P-O-L Override Board Name,00A0,Override Manuf,bspm_P9_41_27
 9: ff:P-O-L Override Board Name,00A0,Override Manuf,am33xx_pwm
</pre>
<div class="paragraph">
<p>Now P9_21 is free for the MiniDisplay to use.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>In future Bone images, all of the pins will already be allocated as part of the main device tree using runtime pinmux helpers and configured at runtime using the <a href="http://bit.ly/1EXLeP2">config-pin utility</a>. This would eliminate the need for device tree overlays in most cases.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now, configure it for the MiniDisplay and run a test:</p>
</div>
<pre data-type="programlisting">
bone$ <strong>echo BB-SPIDEV0 &gt; $SLOTS</strong>
bone$ <strong>./minidisplay-test</strong>
</pre>
<div class="paragraph">
<p>You then see Boris, as shown in <a href="#capes_miniDisplayBoris">MiniDisplay showing Boris <sup class="footnote">[2]</sup></a>.</p>
</div>
<div id="capes_miniDisplayBoris" class="imageblock">
<div class="content">
<img src="figures/miniDisplay_Boris.png" alt="miniDisplay LCD showing Boris">
</div>
<div class="title">Figure 4. MiniDisplay showing Boris <sup class="footnote">[<a id="_footnoteref_2" class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup></div>
</div>
</div>
<div class="sect3">
<h4 id="_discussion_2">Discussion</h4>

</div>
</div>
<div class="sect2">
<h3 id="_connecting_multiple_capes">Connecting Multiple Capes</h3>
<div class="sect3">
<h4 id="_problem_3">Problem</h4>
<div class="paragraph">
<p>You want to use more than one cape at a time.</p>
</div>
</div>
<div class="sect3">
<h4 id="_solution_3">Solution</h4>
<div class="paragraph">
<p>First, look at each cape that you want to stack mechanically. Are they all using stacking
headers like the ones shown in <a href="#capes_stacking_headers">Stacking headers</a>? No more than one should be using non-stacking headers.</p>
</div>
<div id="capes_stacking_headers" class="imageblock">
<div class="content">
<img src="figures/stacking_headers.JPG" alt="stacking headers">
</div>
<div class="title">Figure 5. Stacking headers</div>
</div>
<div class="paragraph">
<p>Note that larger LCD panels might provide expansion headers, such as the ones
shown in <a href="#capes_lcd_backside">Back side of LCD7 cape <sup class="footnote">[3]</sup></a>, rather than the stacking headers, and that those can also be used for adding
additional capes.</p>
</div>
<div id="capes_lcd_backside" class="imageblock">
<div class="content">
<img src="figures/LCD7back.png" alt="LCD7back">
</div>
<div class="title">Figure 6. Back side of LCD7 cape <sup class="footnote">[<a id="_footnoteref_3" class="footnote" href="#_footnotedef_3" title="View footnote.">3</a>]</sup></div>
</div>
<div class="paragraph">
<p>Next, take a note of each pin utilized by each cape. The <a href="http://beaglebonecapes.com">BeagleBone Capes catalog</a> provides a graphical representation for the pin usage of most capes, as shown in <a href="#Audio_cape_pins_fig">Pins utilized by CircuitCo Audio Cape <sup class="footnote">[4]</sup></a> for the Circuitco Audio Cape.</p>
</div>
<div id="Audio_cape_pins_fig" class="imageblock">
<div class="content">
<img src="figures/audioCape.png" alt="CircuitCo Audio Cape">
</div>
<div class="title">Figure 7. Pins utilized by CircuitCo Audio Cape <sup class="footnote">[<a id="_footnoteref_4" class="footnote" href="#_footnotedef_4" title="View footnote.">4</a>]</sup></div>
</div>
<div class="paragraph">
<p>In most cases, the same pin should never be used on two different capes, though in some cases, pins can be shared. Here are some exceptions:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">GND</dt>
<dd>
<p>The ground (GND) pins should be shared between the capes, and there&#8217;s no need to worry about consumed resources on those pins.</p>
</dd>
<dt class="hdlist1">VDD_3V3</dt>
<dd>
<p>The 3.3 V power supply (VDD_3V3) pins can be shared by all capes to supply power, but the total combined consumption of all the capes should be less than 500 mA (250 mA per VDD_3V3 pin).</p>
</dd>
<dt class="hdlist1">VDD_5V</dt>
<dd>
<p>The 5.0 V power supply (VDD_5V) pins can be shared by all capes to supply power, but the total combined consumption of all the capes should be less than 2 A (1 A per VDD_5V pin). It is possible for one, and only one, of the capes to <em>provide</em> power to this pin rather than consume it, and it should provide at least 3 A to ensure proper system function. Note that when no voltage is applied to the DC connector, nor from a cape, these pins will not be powered, even if power is provided via USB.</p>
</dd>
<dt class="hdlist1">SYS_5V</dt>
<dd>
<p>The regulated 5.0 V power supply (SYS_5V) pins can be shared by all capes to supply power, but the total combined consumption of all the capes should be less than 500 mA (250 mA per SYS_5V pin).</p>
</dd>
<dt class="hdlist1">VADC and AGND</dt>
<dd>
<p>The ADC reference voltage pins can be shared by all capes.</p>
</dd>
<dt class="hdlist1">I2C2_SCL and I2C2_SDA</dt>
<dd>
<p>I<sup>2</sup>C is a shared bus, and the I2C2_SCL and I2C2_SDA pins default to having this bus enabled for use by cape expansion ID EEPROMs.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_discussion_3">Discussion</h4>

</div>
</div>
<div class="sect2">
<h3 id="capes_soldering">Moving from a Breadboard to a Protoboard</h3>
<div class="sect3">
<h4 id="_problem_4">Problem</h4>
<div class="paragraph">
<p>You have your circuit working fine on the breadboard, but you want a more reliable solution.</p>
</div>
</div>
<div class="sect3">
<h4 id="_solution_4">Solution</h4>
<div class="paragraph">
<p>Solder your components to a protoboard.</p>
</div>
<div class="paragraph">
<p>To make this recipe, you will need:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Protoboard (see <a href="#app_proto">[app_proto]</a>)</p>
</li>
<li>
<p>Soldering iron (see <a href="#app_misc">[app_misc]</a>)</p>
</li>
<li>
<p>Your other components</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Many places make premade circuit boards that are laid out like the breadboard we have been using. <a href="#capes_beaglebread_fig">BeagleBone breadboard <sup class="footnote">[5]</sup></a> shows the <a href="http://bit.ly/1HCwtB4">BeagleBone Breadboard</a>, which is just one protoboard option.</p>
</div>
<div id="capes_beaglebread_fig" class="imageblock">
<div class="content">
<img src="figures/breadboard.png" alt="BeagleBone Breadboard">
</div>
<div class="title">Figure 8. BeagleBone breadboard <sup class="footnote">[<a id="_footnoteref_5" class="footnote" href="#_footnotedef_5" title="View footnote.">5</a>]</sup></div>
</div>
<div class="paragraph">
<p>You just solder your parts on the protoboard as you had them on the breadboard.</p>
</div>
</div>
<div class="sect3">
<h4 id="_discussion_4">Discussion</h4>

</div>
</div>
<div class="sect2">
<h3 id="capes_creating_prototype_schematic">Creating a Prototype Schematic</h3>
<div class="sect3">
<h4 id="_problem_5">Problem</h4>
<div class="paragraph">
<p>You&#8217;ve wired up a circuit on a breadboard. How do you turn that prototype into a schematic others can read and that you can import into other design tools?</p>
</div>
</div>
<div class="sect3">
<h4 id="_solution_5">Solution</h4>
<div class="paragraph">
<p>In <a href="#tips_fritzing">[tips_fritzing]</a>, we introduced Fritzing as a useful tool for drawing block diagrams. Fritzing can also do circuit schematics and printed-circuit layout. For example, <a href="#capes_quickRobo_fig">A simple robot controller diagram (quickBot.fzz)</a> shows a block diagram for a simple robot controller (<em><span class="keep-together">quickBot.fzz</span></em> is the name of the Fritzing file used to create the diagram).</p>
</div>
<div id="capes_quickRobo_fig" class="imageblock">
<div class="content">
<img src="figures/quickBot_bb.png" alt="Simple robot diagram">
</div>
<div class="title">Figure 9. A simple robot controller diagram (quickBot.fzz)</div>
</div>
<div class="paragraph">
<p>The controller has an H-bridge to drive two DC motors (<a href="#motors_dcDirection">[motors_dcDirection]</a>), an IR range sensor, and two headers for attaching analog encoders for the motors. Both the IR sensor and the encoders have analog outputs that exceed 1.8 V, so each is run through a voltage divider (two resistors) to scale the voltage to the correct range (see <a href="#sensors_hc-sr04">[sensors_hc-sr04]</a> for a voltage divider example).</p>
</div>
<div class="paragraph">
<p><a href="#capes_quickRobo_schemRaw">Automatically generated schematic</a> shows the schematic automatically generated by Fritzing. It&#8217;s a mess. It&#8217;s up to you to fix it.</p>
</div>
<div id="capes_quickRobo_schemRaw" class="imageblock">
<div class="content">
<img src="figures/quickBot_schemRaw.png" alt="Autogenerated schematic">
</div>
<div class="title">Figure 10. Automatically generated schematic</div>
</div>
<div class="paragraph">
<p><a href="#capes_quickRobo_schem">Cleaned-up schematic</a> shows my cleaned-up schematic. I did it by moving the parts around until it looked better.</p>
</div>
<div id="capes_quickRobo_schem" class="imageblock">
<div class="content">
<img src="figures/quickBot_schem.png" alt="Cleaned up schematic">
</div>
<div class="title">Figure 11. Cleaned-up schematic</div>
</div>
</div>
<div class="sect3">
<h4 id="_discussion_5">Discussion</h4>
<div id="capes_quickRobo_schemZoom" class="imageblock">
<div class="content">
<img src="figures/quickBot_schemZoom.png" alt="Zoomed in schematic">
</div>
<div class="title">Figure 12. Zoomed-in schematic</div>
</div>
<div class="paragraph">
<p>You might find that you want to create your design in a more advanced design tool, perhaps because it has the library components you desire, it integrates better with other tools you are using, or it has some other feature (such as simulation) of which you&#8217;d like to take advantage.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="capes_verify">Verifying Your Cape Design</h3>
<div class="sect3">
<h4 id="_problem_6">Problem</h4>
<div class="paragraph">
<p>You&#8217;ve got a design. How do you quickly verify that it works?</p>
</div>
</div>
<div class="sect3">
<h4 id="_solution_6">Solution</h4>
<div class="paragraph">
<p>To make this recipe, you will need:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An oscilloscope (see <a href="#app_misc">[app_misc]</a>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Break down your design into functional subcomponents and write tests for each. Use components you already know are working, such as the onboard LEDs, to display the test status with the code in <a href="#capes_quickBot_motor_test_code">Testing the quickBot motors interface (quickBot_motor_test.js)</a>.</p>
</div>
<div id="capes_quickBot_motor_test_code" class="exampleblock">
<div class="title">Example 1. Testing the quickBot motors interface (quickBot_motor_test.js)</div>
<div class="content">
<pre data-type="programlisting">#!/usr/bin/env node
var b = require('bonescript');
var M1_SPEED    = 'P9_16'; <a class="co" id="co_hello_CO1-1_unique" href="#callout_hello_CO1-1_unique"><img src="callouts/1.png" alt="1"/></a>
var M1_FORWARD  = 'P8_15';
var M1_BACKWARD = 'P8_13';
var M2_SPEED    = 'P9_14';
var M2_FORWARD  = 'P8_9';
var M2_BACKWARD = 'P8_11';
var freq = 50; <a class="co" id="co_hello_CO1-2_unique" href="#callout_hello_CO1-2_unique"><img src="callouts/2.png" alt="2"/></a>
var fast = 0.95;
var slow = 0.7;
var state = 0;  <a class="co" id="co_hello_CO1-3_unique" href="#callout_hello_CO1-3_unique"><img src="callouts/3.png" alt="3"/></a>

b.pinMode(M1_FORWARD, b.OUTPUT); <a class="co" id="co_hello_CO1-4_unique" href="#callout_hello_CO1-4_unique"><img src="callouts/4.png" alt="4"/></a>
b.pinMode(M1_BACKWARD, b.OUTPUT);
b.pinMode(M2_FORWARD, b.OUTPUT);
b.pinMode(M2_BACKWARD, b.OUTPUT);
b.analogWrite(M1_SPEED, 0, freq); <a class="co" id="co_hello_CO1-5_unique" href="#callout_hello_CO1-5_unique"><img src="callouts/5.png" alt="5"/></a>
b.analogWrite(M2_SPEED, 0, freq);

updateMotors(); <a class="co" id="co_hello_CO1-6_unique" href="#callout_hello_CO1-6_unique"><img src="callouts/6.png" alt="6"/></a>

function updateMotors() { <img src="callouts/6.png" alt="6"/>
    //console.log("Setting state = " + state); <a class="co" id="co_hello_CO1-7_unique" href="#callout_hello_CO1-7_unique"><img src="callouts/7.png" alt="7"/></a>
    updateLEDs(state); <img src="callouts/7.png" alt="7"/>
    switch(state) { <img src="callouts/3.png" alt="3"/>
        case 0:
        default:
            M1_set(0); <a class="co" id="co_hello_CO1-8_unique" href="#callout_hello_CO1-8_unique"><img src="callouts/8.png" alt="8"/></a>
            M2_set(0);
            state = 1; <img src="callouts/3.png" alt="3"/>
            break;
        case 1:
            M1_set(slow);
            M2_set(slow);
            state = 2;
            break;
        case 2:
            M1_set(slow);
            M2_set(-slow);
            state = 3;
            break;
        case 3:
            M1_set(-slow);
            M2_set(slow);
            state = 4;
            break;
        case 4:
            M1_set(fast);
            M2_set(fast);
            state = 0;
            break;
    }
    setTimeout(updateMotors, 2000); <img src="callouts/3.png" alt="3"/>
}

function updateLEDs(state) { <img src="callouts/7.png" alt="7"/>
    switch(state) {
    case 0:
        b.digitalWrite("USR0", b.LOW);
        b.digitalWrite("USR1", b.LOW);
        b.digitalWrite("USR2", b.LOW);
        b.digitalWrite("USR3", b.LOW);
        break;
    case 1:
        b.digitalWrite("USR0", b.HIGH);
        b.digitalWrite("USR1", b.LOW);
        b.digitalWrite("USR2", b.LOW);
        b.digitalWrite("USR3", b.LOW);
        break;
    case 2:
        b.digitalWrite("USR0", b.LOW);
        b.digitalWrite("USR1", b.HIGH);
        b.digitalWrite("USR2", b.LOW);
        b.digitalWrite("USR3", b.LOW);
        break;
    case 3:
        b.digitalWrite("USR0", b.LOW);
        b.digitalWrite("USR1", b.LOW);
        b.digitalWrite("USR2", b.HIGH);
        b.digitalWrite("USR3", b.LOW);
        break;
    case 4:
        b.digitalWrite("USR0", b.LOW);
        b.digitalWrite("USR1", b.LOW);
        b.digitalWrite("USR2", b.LOW);
        b.digitalWrite("USR3", b.HIGH);
        break;
    }
}

function M1_set(speed) { <img src="callouts/8.png" alt="8"/>
    speed = (speed &gt; 1) ? 1 : speed; <a class="co" id="co_hello_CO1-9_unique" href="#callout_hello_CO1-9_unique"><img src="callouts/9.png" alt="9"/></a>
    speed = (speed &lt; -1) ? -1 : speed;
    b.digitalWrite(M1_FORWARD, b.LOW);
    b.digitalWrite(M1_BACKWARD, b.LOW);
    if(speed &gt; 0) {
        b.digitalWrite(M1_FORWARD, b.HIGH);
    } else if(speed &lt; 0) {
        b.digitalWrite(M1_BACKWARD, b.HIGH);
    }
    b.analogWrite(M1_SPEED, Math.abs(speed), freq); <a class="co" id="co_hello_CO1-10_unique" href="#callout_hello_CO1-10_unique"><img src="callouts/10.png" alt="10"/></a>
}

function M2_set(speed) {
    speed = (speed &gt; 1) ? 1 : speed;
    speed = (speed &lt; -1) ? -1 : speed;
    b.digitalWrite(M2_FORWARD, b.LOW);
    b.digitalWrite(M2_BACKWARD, b.LOW);
    if(speed &gt; 0) {
        b.digitalWrite(M2_FORWARD, b.HIGH);
    } else if(speed &lt; 0) {
        b.digitalWrite(M2_BACKWARD, b.HIGH);
    }
    b.analogWrite(M2_SPEED, Math.abs(speed), freq);
}</pre>

<dl class="calloutlist">
<dt><a class="co" id="callout_hello_CO1-1_unique" href="#co_hello_CO1-1_unique"><img src="callouts/1.png" alt="1"/></a></dt>
<dd><p>Define each pin as a variable. This makes it easy to change to another pin if you decide that is necessary.</p></dd>
<dt><a class="co" id="callout_hello_CO1-2_unique" href="#co_hello_CO1-2_unique"><img src="callouts/2.png" alt="2"/></a></dt>
<dd><p>Make other simple parameters variables. Again, this makes it easy to update them. When creating this test, I found that the PWM frequency to drive the motors needed to be relatively low to get over the kickback shown in <a data-type="xref" href="#quickBot_motor_kickback"/>. I also found that I needed to get up to about 70 percent duty cycle for my circuit to reliably start the motors turning.</p></dd>
<dt><a class="co" id="callout_hello_CO1-3_unique" href="#co_hello_CO1-3_unique"><img src="callouts/3.png" alt="3"/></a></dt>
<dd><p>Use a simple variable such as <code>state</code> to keep track of the test phase. This is used in a <code>switch</code> statement to jump to the code to configure for that test phase and updated after configuring for the current phase in order to select the next phase. Note that the next phase isn&#8217;t entered until after a two-second delay, as specified in the call to <code>setTimeout()</code>.</p></dd>
<dt><a class="co" id="callout_hello_CO1-4_unique" href="#co_hello_CO1-4_unique"><img src="callouts/4.png" alt="4"/></a></dt>
<dd><p>Perform the initial setup of all the pins.</p></dd>
<dt><a class="co" id="callout_hello_CO1-5_unique" href="#co_hello_CO1-5_unique"><img src="callouts/5.png" alt="5"/></a></dt>
<dd><p>The first time a PWM pin is used, it is configured with the update frequency. It is important to set this just once to the right frequency, because other PWM channels might use the same PWM controller, and attempts to reset the PWM frequency might fail. The <code>pinMode()</code> function doesn&#8217;t have an argument for providing the update frequency, so use the <code>analogWrite()</code> function, instead. You can review using the PWM in <a data-type="xref" href="#motors_servo"/>.</p></dd>
<dt><a class="co" id="callout_hello_CO1-6_unique" href="#co_hello_CO1-6_unique"><img src="callouts/6.png" alt="6"/></a></dt>
<dd><p><code>updateMotors()</code> is the test function for the motors and is defined after all the setup and initialization code. The code calls this function every two seconds using the <code>setTimeout()</code> JavaScript function. The first call is used to prime the loop.</p></dd>
<dt><a class="co" id="callout_hello_CO1-7_unique" href="#co_hello_CO1-7_unique"><img src="callouts/7.png" alt="7"/></a></dt>
<dd><p>The call to <code>console.log()</code> was initially here to observe the state transitions in the debug console, but it was replaced with the <code>updateLEDs()</code> call. Using the <code>USER</code> LEDs makes it possible to note the state transitions without having visibility of the debug console. <code>updateLEDs()</code> is defined later.</p></dd>
<dt><a class="co" id="callout_hello_CO1-8_unique" href="#co_hello_CO1-8_unique"><img src="callouts/8.png" alt="8"/></a></dt>
<dd><p>The <code>M1_set()</code> and <code>M2_set()</code> functions are defined near the bottom and do the work of configuring the motor drivers into a particular state. They take a single argument of <code>speed</code>, as defined between <code>-1</code> (maximum reverse), <code>0</code> (stop), and <code>1</code> (maximum forward).</p></dd>
<dt><a class="co" id="callout_hello_CO1-9_unique" href="#co_hello_CO1-9_unique"><img src="callouts/9.png" alt="9"/></a></dt>
<dd><p>Perform simple bounds checking to ensure that speed values are between <code>-1</code> and <code>1</code>.</p></dd>
<dt><a class="co" id="callout_hello_CO1-10_unique" href="#co_hello_CO1-10_unique"><img src="callouts/10.png" alt="10"/></a></dt>
<dd><p>The <code>analogWrite()</code> call uses the absolute value of <code>speed</code>, making any negative numbers a positive magnitude.</p></dd>
</dl>
</div>
</div>
<div id="quickBot_motor_kickback" class="imageblock">
<div class="content">
<img src="figures/quickBot_motor_kickback.JPG" alt="quickBot kicking back">
</div>
<div class="title">Figure 13. quickBot motor test showing kickback</div>
</div>
<div class="paragraph">
<p>Using the solution in <a href="#basics_autorun">[basics_autorun]</a>, you can untether from your coding station to test your design at your lab workbench, as shown in <a href="#quickBot_scope_fig">quickBot motor test code under scope</a>.</p>
</div>
<div id="quickBot_scope_fig" class="imageblock">
<div class="content">
<img src="figures/quickBot_motor_test_scope.JPG" alt="quickBot under scope">
</div>
<div class="title">Figure 14. quickBot motor test code under scope</div>
</div>
<div class="paragraph">
<p>SparkFun provides a <a href="http://bit.ly/18AzuoR">useful guide to using an oscilloscope</a>. You might want to check it out if you&#8217;ve never used an oscilloscope before.
Looking at the stimulus you&#8217;ll generate <em>before</em> you connect up your hardware will help you avoid surprises.</p>
</div>
</div>
<div class="sect3">
<h4 id="_discussion_6">Discussion</h4>

</div>
</div>
<div class="sect2">
<h3 id="capes_layout">Laying Out Your Cape PCB</h3>
<div class="sect3">
<h4 id="_problem_7">Problem</h4>
<div class="paragraph">
<p>You&#8217;ve generated a diagram and schematic for your circuit and verified that they are correct. How do you create a PCB?</p>
</div>
</div>
<div class="sect3">
<h4 id="_solution_7">Solution</h4>
<div class="paragraph">
<p>If you&#8217;ve been using Fritzing, all you need to do is click the PCB tab, and there&#8217;s your board. Well, almost. Much like the schematic view shown in <a href="#capes_creating_prototype_schematic">Creating a Prototype Schematic</a>, you need to do some layout work before it&#8217;s actually usable. I just moved the components around until they seemed to be grouped logically and then clicked the Autoroute button.  After a minute or two of trying various layouts, Fritzing picked the one it determined to be the best. <a href="#capes_quickRobo_pcb">Simple robot PCB</a> shows the results.</p>
</div>
<div id="capes_quickRobo_pcb" class="imageblock">
<div class="content">
<img src="figures/quickBot_pcb.png" alt="Simple robot PCB">
</div>
<div class="title">Figure 15. Simple robot PCB</div>
</div>
<div class="paragraph">
<p>The <a href="http://bit.ly/1HCxokQ">Fritzing pre-fab web page</a> has a few helpful hints, including checking the widths of all your traces and cleaning up any questionable routing created by the autorouter.</p>
</div>
</div>
<div class="sect3">
<h4 id="_discussion_7">Discussion</h4>
<div class="paragraph">
<p>The PCB in <a href="#capes_quickRobo_pcb">Simple robot PCB</a> is a two-sided board. One color (or shade of gray in the printed book) represents traces on one side of the board, and the other color (or shade of gray) is the other side. Sometimes, you&#8217;ll see a trace come to a small circle and then change colors. This is where it is switching sides of the board through what&#8217;s called a <em>via</em>. One of the goals of PCB design is to minimize the number of vias.</p>
</div>
<div class="paragraph">
<p><a href="#capes_quickRobo_pcb">Simple robot PCB</a> wasn&#8217;t my first try or my last. My approach was to see what was needed to hook where and move the components around to make it easier for the autorouter to carry out its job.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>There are entire books and websites dedicated to creating PCB layouts. Look around and see what you can find. <a href="http://bit.ly/1wXTLki">SparkFun&#8217;s guide to making PCBs</a> is particularly useful.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="_customizing_the_board_outline">Customizing the Board Outline</h5>
<div class="paragraph">
<p>One challenge that slipped my first pass review was the board outline. The part we installed in <a href="#tips_fritzing">[tips_fritzing]</a> is meant to represent BeagleBone Black, not a cape, so the outline doesn&#8217;t have the notch cut out of it for the Ethernet <span class="keep-together">connector</span>.</p>
</div>
<div class="paragraph">
<p>The <a href="http://bit.ly/1xd1aGV">Fritzing custom PCB outline page</a> describes how to create and use a custom board outline. Although it is possible to use a drawing tool like <a href="https://inkscape.org/en/">Inkscape</a>, I chose to use <a href="http://bit.ly/1b2aZmn">the SVG <em>path</em> command</a> directly to create <a href="#capes_boardoutline_code">Outline SVG for BeagleBone cape (beaglebone_cape_boardoutline.svg)</a>.</p>
</div>
<div id="capes_boardoutline_code" class="exampleblock">
<div class="title">Example 2. Outline SVG for BeagleBone cape (beaglebone_cape_boardoutline.svg)</div>
<div class="content">
<pre data-type="programlisting">&lt;?xml version='1.0' encoding='UTF-8' standalone='no'?&gt;
&lt;svg xmlns="http://www.w3.org/2000/svg" version="1.1"
    width="306"  height="193.5"&gt;&lt;!--<a class="co" id="co_capes_bo_1_co" href="#callout_capes_bo_1_co"><img src="callouts/1.png" alt="1"/></a>--&gt;
 &lt;g id="board"&gt;&lt;!--<a class="co" id="co_capes_bo_2_co" href="#callout_capes_bo_2_co"><img src="callouts/2.png" alt="2"/></a>--&gt;
  &lt;path fill="#338040" id="boardoutline" d="M 22.5,0 l 0,56 L 72,56
      q 5,0 5,5 l 0,53.5 q 0,5 -5,5 L 0,119.5 L 0,171 Q 0,193.5 22.5,193.5
      l 238.5,0 c 24.85281,0 45,-20.14719 45,-45 L 306,45
      C 306,20.14719 285.85281,0 261,0 z"/&gt;&lt;!--<a class="co" id="co_capes_bo_3_co" href="#callout_capes_bo_3_co"><img src="callouts/3.png" alt="3"/></a>--&gt;
 &lt;/g&gt;
&lt;/svg&gt;
</pre>
</div>
</div>
<dl class="calloutlist">
<dt><a class="co" id="callout_capes_bo_1_co" href="#co_capes_bo_1_co"><img src="callouts/1.png" alt="1"/></a></dt><dd><p>This is a standard SVG header. The width and height are set based on the BeagleBone outline provided in the Adafruit library.</p></dd>
<dt><a class="co" id="callout_capes_bo_2_co" href="#co_capes_bo_2_co"><img src="callouts/2.png" alt="2"/></a></dt><dd><p>Fritzing requires the element to be within a layer called <code>board</code>.</p></dd>
<dt><a class="co" id="callout_capes_bo_3_co" href="#co_capes_bo_3_co"><img src="callouts/3.png" alt="3"/></a></dt><dd><p>Fritzing requires the color to be <code>#338040</code> and the layer to be called <code>boardoutline</code>. The units end up being 1/90 of an inch. That is, take the numbers in the SVG code and divide by 90 to get the numbers from the System Reference Manual.</p></dd>
</dl>
<div class="paragraph">
<p>The measurements are taken from the <a href="http://bit.ly/1C5rSa8">BeagleBone Black System Reference Manual</a>, as shown in <a href="#capes_dimensions_fig">Cape dimensions</a>.</p>
</div>
<div id="capes_dimensions_fig" class="imageblock">
<div class="content">
<img src="figures/srm_cape_dimensions.png" alt="Cape dimensions in SRM">
</div>
<div class="title">Figure 16. Cape dimensions</div>
</div>
<div class="paragraph">
<p>You can observe the rendered output of <a href="#capes_boardoutline_code">Outline SVG for BeagleBone cape (beaglebone_cape_boardoutline.svg)</a> quickly by opening the file in a web browser, as shown in <a href="#capes_boardoutline_fig">Rendered cape outline in Chrome</a>.</p>
</div>
<div id="capes_boardoutline_fig" class="imageblock">
<div class="content">
<img src="figures/beaglebone_cape_boardoutline.png" alt="Board outline in Chrome">
</div>
<div class="title">Figure 17. Rendered cape outline in Chrome</div>
</div>
<div class="paragraph">
<p>After you have the SVG outline, you&#8217;ll need to select the PCB in Fritzing and select a custom shape in the Inspector box. Begin with the original background, as shown in <a href="#capes_fritzing1">PCB with original board, without notch for Ethernet connector</a>.</p>
</div>
<div id="capes_fritzing1" class="imageblock">
<div class="content">
<img src="figures/fritzing1.png" alt="PCB orginal baord">
</div>
<div class="title">Figure 18. PCB with original board, without notch for Ethernet connector</div>
</div>
<div class="paragraph">
<p>Hide all but the Board Layer (<a href="#capes_fritzing2">PCB with all but the Board Layer hidden</a>).</p>
</div>
<div id="capes_fritzing2" class="imageblock">
<div class="content">
<img src="figures/fritzing2.png" alt="PCB orginal baord hidden">
</div>
<div class="title">Figure 19. PCB with all but the Board Layer hidden</div>
</div>
<div class="paragraph">
<p>Select the PCB1 object and  then, in the Inspector pane, scroll down to the "load image file" button (<a href="#capes_fritzing3">Clicking :load image file: with PCB1 selected</a>).</p>
</div>
<div id="capes_fritzing3" class="imageblock">
<div class="content">
<img src="figures/fritzing3.png" alt="PCB load image file">
</div>
<div class="title">Figure 20. Clicking :load image file: with PCB1 selected</div>
</div>
<div class="paragraph">
<p>Navigate to the <em>beaglebone_cape_boardoutline.svg</em> file created in <a href="#capes_boardoutline_code">Outline SVG for BeagleBone cape (beaglebone_cape_boardoutline.svg)</a>, as shown in <a href="#capes_fritzing4">Selecting the .svg file</a>.</p>
</div>
<div id="capes_fritzing4" class="imageblock">
<div class="content">
<img src="figures/fritzing4.png" alt="PCB selecting svg file">
</div>
<div class="title">Figure 21. Selecting the .svg file</div>
</div>
<div class="paragraph">
<p>Turn on the other layers and line up the Board Layer with the rest of the PCB, as shown in <a href="#capes_fritzing_inspector_fig">PCB Inspector</a>.</p>
</div>
<div id="capes_fritzing_inspector_fig" class="imageblock">
<div class="content">
<img src="figures/Fritzing_Inspector.png" alt="PCB Inspector">
</div>
<div class="title">Figure 22. PCB Inspector</div>
</div>
<div class="paragraph">
<p>Now, you can save your file and send it off to be made, as described in <a href="#capes_prototype">Producing a Prototype</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_pcb_design_alternatives">PCB Design Alternatives</h5>
<div class="paragraph">
<p>There are other free PCB design programs. Here are a few.</p>
</div>
<div class="paragraph">
<p><strong>EAGLE</strong></p>
</div>
<div class="paragraph">
<p><a href="http://www.cadsoftusa.com/">Eagle PCB</a> and <a href="http://bit.ly/19cbwS0">DesignSpark PCB</a> are two popular design programs. Many capes (and other PCBs) are designed with Eagle PCB, and the files are available. For example, the MiniDisplay cape (<a href="#capes_miniDisplay">Using a 128 x 128-Pixel LCD Cape</a>) has the schematic shown in <a href="#capes_miniDisplay_schem">Schematic for the MiniDisplay cape</a> and PCB shown in <a href="#capes_miniDisplay_pcb">PCB for MiniDisplay cape</a>.</p>
</div>
<div id="capes_miniDisplay_schem" class="imageblock">
<div class="content">
<img src="figures/miniDisplay_Cape_schem.png" alt="Schematic for miniDisplay">
</div>
<div class="title">Figure 23. Schematic for the MiniDisplay cape</div>
</div>
<div id="capes_miniDisplay_pcb" class="imageblock">
<div class="content">
<img src="figures/miniDisplay_Cape_pcb.png" alt="PCB for miniDisplay">
</div>
<div class="title">Figure 24. PCB for MiniDisplay cape</div>
</div>
<div class="paragraph">
<p>A good starting point is to take the PCB layout for the MiniDisplay and edit it for your project. The connectors for P8 and P9 are already in place and ready to go.</p>
</div>
<div class="paragraph">
<p>Eagle PCB is a powerful system with many good tutorials online. The free version runs on Windows, Mac, and Linux, but it has three <a href="http://bit.ly/1E5Kh3l">limitations</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The usable board area is limited to 100 x 80 mm (4 x 3.2 inches).</p>
</li>
<li>
<p>You can use only two signal layers (Top and Bottom).</p>
</li>
<li>
<p>The schematic editor can create only one sheet.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can install Eagle PCB on your Linux host by using the following command:</p>
</div>
<pre data-type="programlisting">
host$ <strong>sudo apt install eagle</strong>
Reading package lists... Done
Building dependency tree
Reading state information... Done
...
Setting up eagle (6.5.0-1) ...
Processing triggers for libc-bin (2.19-0ubuntu6.4) ...
host$ <strong>eagle</strong>
</pre>
<div class="paragraph">
<p>You&#8217;ll see the startup screen shown in <a href="#capes_Eagle_License">Eagle PCB startup screen</a>.</p>
</div>
<div id="capes_Eagle_License" class="imageblock">
<div class="content">
<img src="figures/EagleLicense.png" alt="Eagle License">
</div>
<div class="title">Figure 25. Eagle PCB startup screen</div>
</div>
<div class="paragraph">
<p>Click "Run as Freeware." When my Eagle started, it said it needed to be updated. To update on Linux, follow the link provided by Eagle and download <em>eagle-lin-7.2.0.run</em> (or whatever version is current.). Then run the following commands:</p>
</div>
<pre data-type="programlisting">
host$ <strong>chmod +x eagle-lin-7.2.0.run</strong>
host$ <strong>./eagle-lin-7.2.0.run</strong>
</pre>
<div class="paragraph">
<p>A series of screens will appear. Click Next. When you see a screen that looks like <a href="#capes_eagle3">The Eagle installation destination directory</a>, note the Destination Directory.</p>
</div>
<div id="capes_eagle3" class="imageblock">
<div class="content">
<img src="figures/eagle3.png" alt="Eagle install destination directory">
</div>
<div class="title">Figure 26. The Eagle installation destination directory</div>
</div>
<div class="paragraph">
<p>Continue clicking Next until it&#8217;s installed. Then run the following commands (where ~/eagle-7.2.0 is the path you noted in <a href="#capes_eagle3">The Eagle installation destination directory</a>):</p>
</div>
<pre data-type="programlisting">
host$ <strong>cd /usr/bin</strong>
host$ <strong>sudo rm eagle</strong>
host$ <strong>sudo ln -s ~/eagle-7.2.0/bin/eagle .</strong>
host$ <strong>cd</strong>
host$ <strong>eagle</strong>
</pre>
<div class="paragraph">
<p>The ls command links eagle in <em>/usr/bin</em>, so you can run eagle from any directory. After eagle starts, you&#8217;ll see the start screen shown in <a href="#capes_eagle7">The Eagle start screen</a>.</p>
</div>
<div id="capes_eagle7" class="imageblock">
<div class="content">
<img src="figures/eagle7.png" alt="Eagle start screen">
</div>
<div class="title">Figure 27. The Eagle start screen</div>
</div>
<div class="paragraph">
<p>Ensure that the correct version number appears.</p>
</div>
<div class="paragraph">
<p>If you are moving a design from Fritzing to Eagle, see <a href="#capes_schematic_migration">Migrating a Fritzing Schematic to Another Tool</a> for tips on converting from one to the other.</p>
</div>
<div class="paragraph">
<p><strong>DesignSpark PCB</strong></p>
</div>
<div class="paragraph">
<p>The free <a href="http://bit.ly/19cbwS0">DesignSpark PCB</a> doesn&#8217;t have the same limitations as Eagle PCB, but it runs only on Windows. Also, it doesn&#8217;t seem to have the following of Eagle at this time.</p>
</div>
<div id="capes_upverter" class="paragraph">
<p><strong>Upverter</strong></p>
</div>
<div class="paragraph">
<p>In addition to free solutions you run on your desktop, you can also work with a browser-based tool called <a href="https://upverter.com/">Upverter</a>. With Upverter, you can collaborate easily, editing your designs from anywhere on the Internet. It also provides many conversion options and a PCB fabrication service.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Don&#8217;t confuse Upverter with Upconverter (<a href="#capes_schematic_migration">Migrating a Fritzing Schematic to Another Tool</a>). Though their names differ by only three letters, they differ greatly in what they do.</p>
</div>
</td>
</tr>
</table>
</div>
<div id="capes_kicad" class="paragraph">
<p><strong>Kicad</strong></p>
</div>
<div class="paragraph">
<p>Unlike the previously mentioned free (no-cost) solutions, <a href="http://bit.ly/1b2bnBg">Kicad</a> is open source and provides some features beyond those of Fritzing. Notably, <a href="http://circuithub.com/">CircuitHub</a> (discussed in <a href="#capes_production">Putting Your Cape Design into Production</a>) provides support for uploading Kicad designs.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="capes_schematic_migration">Migrating a Fritzing Schematic to Another Tool</h3>
<div class="sect3">
<h4 id="_problem_8">Problem</h4>
<div class="paragraph">
<p>You created your schematic in Fritzing, but it doesn&#8217;t integrate with everything you need. How can you move the schematic to another tool?</p>
</div>
</div>
<div class="sect3">
<h4 id="_solution_8">Solution</h4>
<div class="paragraph">
<p>Use the <a href="http://bit.ly/1wXUkdM">Upverter schematic-file-converter</a> Python script. For example, suppose that you want to convert the Fritzing file for the diagram shown in <a href="#capes_quickRobo_fig">A simple robot controller diagram (quickBot.fzz)</a>. First, install Upverter.</p>
</div>
<div class="paragraph">
<p>I found it necessary to install libfreetype6 and freetype-py onto my system, but you might not need this first step:</p>
</div>
<pre data-type="programlisting">
host$ <strong>sudo apt install libfreetype6</strong>
Reading package lists... Done
Building dependency tree
Reading state information... Done
libfreetype6 is already the newest version.
0 upgraded, 0 newly installed, 0 to remove and 154 not upgraded.
host$ <strong>sudo pip install freetype-py</strong>
Downloading/unpacking freetype-py
  Running setup.py egg_info for package freetype-py

Installing collected packages: freetype-py
  Running setup.py install for freetype-py

Successfully installed freetype-py
Cleaning up...
</pre>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>All these commands are being run on the Linux-based host computer, as shown by the host$ prompt. Log in as a normal user, not root.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now, install the schematic-file-converter tool:</p>
</div>
<pre data-type="programlisting">
host$ <strong>git clone git@github.com:upverter/schematic-file-converter.git</strong>
Cloning into 'schematic-file-converter'...
remote: Counting objects: 22251, done.
remote: Total 22251 (delta 0), reused 0 (delta 0)
Receiving objects: 100% (22251/22251), 39.45 MiB | 7.28 MiB/s, done.
Resolving deltas: 100% (14761/14761), done.
Checking connectivity... done.
Checking out files: 100% (16880/16880), done.
host$ <strong>cd schematic-file-converter</strong>
host$ <strong>sudo python setup.py install</strong>
.
.
.
Extracting python_upconvert-0.8.9-py2.7.egg to \
    /usr/local/lib/python2.7/dist-packages
Adding python-upconvert 0.8.9 to easy-install.pth file

Installed /usr/local/lib/python2.7/dist-packages/python_upconvert-0.8.9-py2.7.egg
Processing dependencies for python-upconvert==0.8.9
Finished processing dependencies for python-upconvert==0.8.9
host$ <strong>cd ..</strong>
host$ <strong>python -m upconvert.upconverter -h</strong>
usage: upconverter.py [-h] [-i INPUT] [-f TYPE] [-o OUTPUT] [-t TYPE]
                      [-s SYMDIRS [SYMDIRS ...]] [--unsupported]
                      [--raise-errors] [--profile] [-v] [--formats]

optional arguments:
  -h, --help            show this help message and exit
  -i INPUT, --input INPUT
                        read INPUT file in
  -f TYPE, --from TYPE  read input file as TYPE
  -o OUTPUT, --output OUTPUT
                        write OUTPUT file out
  -t TYPE, --to TYPE    write output file as TYPE
  -s SYMDIRS [SYMDIRS ...], --sym-dirs SYMDIRS [SYMDIRS ...]
                        specify SYMDIRS to search for .sym files (for gEDA
                        only)
  --unsupported         run with an unsupported python version
  --raise-errors        show tracebacks for parsing and writing errors
  --profile             collect profiling information
  -v, --version         print version information and quit
  --formats             print supported formats and quit
</pre>
<div class="paragraph pagebreak-before">
<p>At the time of this writing, Upverter suppports the following file types:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">File type</th>
<th class="tableblock halign-left valign-top">Support</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">openjson</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">i/o</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">kicad</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">i/o</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">geda</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">i/o</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">eagle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">i/o</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">eaglexml</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">i/o</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">fritzing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">in only, schematic only</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gerber</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">i/o</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">specctra</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">i/o</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">image</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">out only</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ncdrill</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">out only</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">bom (csv)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">out only</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">netlist (csv)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">out only</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>After Upverter is installed, run the file (<em>quickBot.fzz</em>) that generated <a href="#capes_quickRobo_fig">A simple robot controller diagram (quickBot.fzz)</a> through Upverter:</p>
</div>
<pre data-type="programlisting">
host$ <strong>python -m upconvert.upconverter -i quickBot.fzz \
-f fritzing -o quickBot-eaglexml.sch -t eaglexml --unsupported</strong>
WARNING: RUNNING UNSUPPORTED VERSION OF PYTHON (2.7 > 2.6)
DEBUG:main:parsing quickBot.fzz in format fritzing
host$ <strong>ls -l</strong>
total 188
-rw-rw-r-- 1 ubuntu ubuntu  63914 Nov 25 19:47 quickBot-eaglexml.sch
-rw-r--r-- 1 ubuntu ubuntu 122193 Nov 25 19:43 quickBot.fzz
drwxrwxr-x 9 ubuntu ubuntu   4096 Nov 25 19:42 schematic-file-converter
</pre>
<div class="paragraph">
<p><a href="#caps_eagle">Output of Upverter conversion</a> shows the output of the conversion.</p>
</div>
<div id="caps_eagle" class="imageblock">
<div class="content">
<img src="figures/quickBot_eaglexml.png" alt="Converter Output">
</div>
<div class="title">Figure 28. Output of Upverter conversion</div>
</div>
<div class="paragraph">
<p>No one said it would be pretty!</p>
</div>
</div>
<div class="sect3">
<h4 id="_discussion_8">Discussion</h4>
<div class="paragraph">
<p>I found that Eagle was more generous at reading in the eaglexml format than the eagle format. This also made it easier to hand-edit any translation issues.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="capes_prototype">Producing a Prototype</h3>
<div class="sect3">
<h4 id="_problem_9">Problem</h4>
<div class="paragraph">
<p>You have your PCB all designed. How do you get it made?</p>
</div>
</div>
<div class="sect3">
<h4 id="_solution_9">Solution</h4>
<div class="paragraph">
<p>To make this recipe, you will need:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A completed design (see <a href="#capes_layout">Laying Out Your Cape PCB</a>)</p>
</li>
<li>
<p>Soldering iron (see <a href="#app_misc">[app_misc]</a>)</p>
</li>
<li>
<p>Oscilloscope (see <a href="#app_misc">[app_misc]</a>)</p>
</li>
<li>
<p>Multimeter (see <a href="#app_misc">[app_misc]</a>)</p>
</li>
<li>
<p>Your other components</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Upload your design to <a href="http://oshpark.com">OSH Park</a> and order a few boards. <a href="#capes_oshpark_share">The OSH Park QuickBot Cape shared project page</a> shows a resulting <a href="http://bit.ly/1MtlzAp">shared project page for the quickBot cape</a> created in <a href="#capes_layout">Laying Out Your Cape PCB</a>. We&#8217;ll proceed to break down how this design was uploaded and shared to enable ordering fabricated PCBs.</p>
</div>
<div id="capes_oshpark_share" class="imageblock">
<div class="content">
<img src="figures/quickBot_oshpark_share.png" alt="quickBot oshpark share">
</div>
<div class="title">Figure 29. The OSH Park QuickBot Cape shared project page</div>
</div>
<div class="paragraph">
<p>Within Fritzing, click the menu next to "Export for PCB" and choose "Extended Gerber," as shown in <a href="#capes_fritzing_export_fig">Choosing "Extended Gerber" in Fritzing</a>. You&#8217;ll need to choose a directory in which to save them and then compress them all into a <a href="http://bit.ly/1Br5lEh">Zip file</a>. The <a href="http://bit.ly/1B4GqRU">WikiHow article on creating Zip files</a> might be helpful if you aren&#8217;t very experienced at making these.</p>
</div>
<div id="capes_fritzing_export_fig" class="imageblock">
<div class="content">
<img src="figures/quickBot_fritzing_export.png" alt="quickBot fritzing export">
</div>
<div class="title">Figure 30. Choosing "Extended Gerber" in Fritzing</div>
</div>
<div class="paragraph">
<p>Things on the <a href="http://oshpark.com">OSH Park website</a> are reasonably self-explanatory. You&#8217;ll need to create an account and upload the Zip file containing the <a href="http://bit.ly/1B4GzEZ">Gerber files</a> you created. If you are a cautious person, you might choose to examine the Gerber files with a Gerber file viewer first. The <a href="http://bit.ly/18bUgeA">Fritzing fabrication FAQ</a> offers several suggestions, including <a href="http://gerbv.sourceforge.net/">gerbv</a> for Windows and Linux users.</p>
</div>
<div class="paragraph">
<p>When your upload is complete, you&#8217;ll be given a quote, shown images for review, and presented with options for accepting and ordering. After you have accepted the design, your <a href="https://oshpark.com/users/current">list of accepted designs</a> will also include the option of enabling sharing of your designs so that others can order a PCB, as well. If you are looking to make some money on your design, you&#8217;ll want to go another route, like the one described in <a href="#capes_production">Putting Your Cape Design into Production</a>. <a href="#capes_quickbot_pcb">QuickBot PCB</a> shows the resulting PCB that arrives in the mail.</p>
</div>
<div id="capes_quickbot_pcb" class="imageblock">
<div class="content">
<img src="figures/quickBot_pcb.JPG" alt="quickBot pcb">
</div>
<div class="title">Figure 31. QuickBot PCB</div>
</div>
<div class="paragraph">
<p>Now is a good time to ensure that you have all of your components and a soldering station set up as in <a href="#capes_soldering">Moving from a Breadboard to a Protoboard</a>, as well as an oscilloscope, as used in <a href="#capes_verify">Verifying Your Cape Design</a>.</p>
</div>
<div class="paragraph">
<p>When you get your board, it is often informative to "buzz out" a few connections by using a multimeter. If you&#8217;ve never used a multimeter before, the <a href="http://bit.ly/18bUgeA">SparkFun</a> or <a href="http://bit.ly/1Br5Xtv">Adafruit</a> tutorials might be helpful. Set your meter to continuity testing mode and probe between points where the headers are and where they should be connecting to your components. This would be more difficult and less accurate after you solder down your components, so it is a good idea to keep a bare board around just for this purpose.</p>
</div>
<div class="paragraph">
<p>You&#8217;ll also want to examine your board mechanically before soldering parts down. You don&#8217;t want to waste components on a PCB that might need to be altered or replaced.</p>
</div>
<div class="paragraph">
<p>When you begin assembling your board, it is advisable to assemble it in functional subsections, if possible, to help narrow down any potential issues. <a href="#capes_motors_soldered">QuickBot motors under test</a> shows the motor portion wired up and running the test in <a href="#capes_quickBot_motor_test_code">Testing the quickBot motors interface (quickBot_motor_test.js)</a>.</p>
</div>
<div id="capes_motors_soldered" class="imageblock">
<div class="content">
<img src="figures/quickBot_motors.jpg" alt="quickBot motors">
</div>
<div class="title">Figure 32. QuickBot motors under test</div>
</div>
<div class="paragraph">
<p>Continue assembling and testing your board until you are happy. If you find issues, you might choose to cut traces and use point-to-point wiring to resolve your issues before placing an order for a new PCB. Better right the second time than the third!</p>
</div>
</div>
<div class="sect3">
<h4 id="_discussion_9">Discussion</h4>

</div>
</div>
<div class="sect2">
<h3 id="_creating_contents_for_your_cape_configuration_eeprom">Creating Contents for Your Cape Configuration EEPROM</h3>
<div class="sect3">
<h4 id="_problem_10">Problem</h4>
<div class="paragraph">
<p>Your cape is ready to go, and you want it to automatically initialize when the Bone boots up.</p>
</div>
</div>
<div class="sect3">
<h4 id="_solution_10">Solution</h4>
<div class="paragraph">
<p>Complete capes have an I<sup>2</sup>C EEPROM on board that contains configuration information that is read at boot time. <a href="http://bit.ly/1Fb64uF">Adventures in BeagleBone Cape EEPROMs</a> gives a helpful description of two methods for programming the EEPROM.  <a href="http://bit.ly/1E5M7RJ">How to Roll your own BeagleBone Capes</a> is a good four-part series on creating a cape, including how to wire and program the EEPROM.</p>
</div>
</div>
<div class="sect3">
<h4 id="_discussion_10">Discussion</h4>

</div>
</div>
<div class="sect2">
<h3 id="capes_production">Putting Your Cape Design into Production</h3>
<div class="sect3">
<h4 id="_problem_11">Problem</h4>
<div class="paragraph">
<p>You want to share your cape with others.  How do you scale up?</p>
</div>
</div>
<div class="sect3">
<h4 id="_solution_11">Solution</h4>
<div class="paragraph">
<p><a href="https://circuithub.com/">CircuitHub</a> offers a great tool to get a quick quote on assembled PCBs. To make things simple, I downloaded the <a href="http://bit.ly/1C5uvJc">CircuitCo MiniDisplay Cape Eagle design materials</a> and uploaded them to CircuitHub.</p>
</div>
<div class="paragraph">
<p>After the design is uploaded, you&#8217;ll need to review the parts to verify that CircuitHub has or can order the right ones. Find the parts in the catalog by changing the text in the search box and clicking the magnifying glass. When you&#8217;ve found a suitable match, select it to confirm its use in your design, as shown in <a href="#capes_circuithub_parts">CircuitHub part matching</a>.</p>
</div>
<div id="capes_circuithub_parts" class="imageblock">
<div class="content">
<img src="figures/circuithub_part_matching.png" alt="circuithub part matching">
</div>
<div class="title">Figure 33. CircuitHub part matching</div>
</div>
<div class="paragraph">
<p>When you&#8217;ve selected all of your parts, a quote tool appears at the bottom of the page, as shown in <a href="#capes_circuithub_quote">CircuitHub quote generation</a>.</p>
</div>
<div id="capes_circuithub_quote" class="imageblock">
<div class="content">
<img src="figures/circuithub_quote.png" alt="circuithub quote">
</div>
<div class="title">Figure 34. CircuitHub quote generation</div>
</div>
<div class="paragraph">
<p>Checking out the pricing on the MiniDisplay Cape (without including the LCD itself) in <a href="#capes_circuithub_pricing_table">CircuitHub price examples (all prices USD)</a>, you can get a quick idea of how increased volume can dramatically impact the per-unit costs.</p>
</div>
<table id="capes_circuithub_pricing_table" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. CircuitHub price examples (all prices USD)</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Quantity</th>
<th class="tableblock halign-left valign-top">1</th>
<th class="tableblock halign-left valign-top">10</th>
<th class="tableblock halign-left valign-top">100</th>
<th class="tableblock halign-left valign-top">1000</th>
<th class="tableblock halign-left valign-top">10,000</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PCB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$208.68</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$21.75</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$3.30</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$0.98</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$0.90</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$11.56</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$2.55</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$1.54</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$1.01</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$0.92</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Assembly</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$249.84</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$30.69</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$7.40</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$2.79</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$2.32</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Per unit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$470.09</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$54.99</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$12.25</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$4.79</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$4.16</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Total</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$470.09</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$550.00</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$1,225.25</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$4,796.00</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$41,665.79</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Checking the <a href="http://bit.ly/1GF6xqE">Crystalfontz web page for the LCD</a>, you can find the prices for the LCDs as well, as shown in <a href="#capes_lcd_pricing_table">LCD pricing (USD)</a>.</p>
</div>
<table id="capes_lcd_pricing_table" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. LCD pricing (USD)</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Quantity</th>
<th class="tableblock halign-left valign-top">1</th>
<th class="tableblock halign-left valign-top">10</th>
<th class="tableblock halign-left valign-top">100</th>
<th class="tableblock halign-left valign-top">1000</th>
<th class="tableblock halign-left valign-top">10,000</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Per unit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$12.12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$7.30</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$3.86</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$2.84</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$2.84</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Total</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$12.12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$73.00</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$386.00</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$2,840.00</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$28,400.00</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>To enable more cape developers to launch their designs to the market, CircuitHub has launched a <a href="http://campaign.circuithub.com">group buy campaign site</a>. You, as a cape developer, can choose how much markup you need to be paid for your work and launch the campaign to the public. Money is only collected if and when the desired target quantity is reached, so there&#8217;s no risk that the boards will cost too much to be affordable. This is a great way to cost-effectively launch your boards to market!</p>
</div>
</div>
<div class="sect3">
<h4 id="_discussion_11">Discussion</h4>
<div class="paragraph">
<p>There&#8217;s no real substitute for getting to know your contract manufacturer, its capabilities, communication style, strengths, and weaknesses. Look around your town to see if anyone is doing this type of work and see if they&#8217;ll give you a tour.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Don&#8217;t confuse CircuitHub and CircuitCo. CircuitCo is the official contract manufacturer of BeagleBoard.org and not the same company as CircuitHub, the online contract manufacturing service. CircuitCo would be an excellent choice for you to consider to perform your contract manufacturing, but it doesn&#8217;t offer an online quote service at this point, so it isn&#8217;t as easy to include details on how to engage with it in this book.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. <a href="#capes_7inLCD_fig">[capes_7inLCD_fig]</a> was originally posted by CircuitCo at <a href="http://elinux.org/File:BeagleBone-LCD7-Front.jpg" class="bare">http://elinux.org/File:BeagleBone-LCD7-Front.jpg</a> under a <a href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.
</div>
<div class="footnote" id="_footnotedef_2">
<a href="#_footnoteref_2">2</a>. <a href="#capes_miniDisplayBoris">[capes_miniDisplayBoris]</a> was originally posted by David Anders at <a href="http://elinux.org/File:Minidisplay-boris.jpg" class="bare">http://elinux.org/File:Minidisplay-boris.jpg</a> under a <a href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.
</div>
<div class="footnote" id="_footnotedef_3">
<a href="#_footnoteref_3">3</a>. <a href="#capes_lcd_backside">[capes_lcd_backside]</a> was originally posted by CircuitCo at <a href="http://elinux.org/File:BeagleBone-LCD-Backside.jpg" class="bare">http://elinux.org/File:BeagleBone-LCD-Backside.jpg</a> under a <a href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.
</div>
<div class="footnote" id="_footnotedef_4">
<a href="#_footnoteref_4">4</a>. <a href="#Audio_cape_pins_fig">[Audio_cape_pins_fig]</a> was originally posted by Djackson at <a href="http://elinux.org/File:Audio_pins_revb.png" class="bare">http://elinux.org/File:Audio_pins_revb.png</a> under a <a href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.
</div>
<div class="footnote" id="_footnotedef_5">
<a href="#_footnoteref_5">5</a>. <a href="#capes_beaglebread_fig">[capes_beaglebread_fig]</a> was originally posted by William Traynor at <a href="http://elinux.org/File:BeagleBone-Breadboard.jpg" class="bare">http://elinux.org/File:BeagleBone-Breadboard.jpg</a> under a <a href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2022-07-09 10:52:52 -0400
</div>
</div>
</body>
</html>